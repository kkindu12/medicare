<div class="card p-3 h-100">
  <div class="d-flex justify-content-between align-items-start mb-3">
    <h5 class="card-title mb-0">
      <i class="bi bi-person-badge me-2 text-primary"></i>
      Dr. {{ record.doctorUser?.firstName || 'Unknown' }} {{ record.doctorUser?.lastName || 'Doctor' }}
    </h5>
    <div *ngIf="record.isEdited" class="edited-indicator">
      <small class="badge bg-info text-dark">
        <i class="bi bi-pencil-square"></i> Edited
      </small>
    </div>
  </div>
  
  <div class="record-details">
    <div class="mb-2">
      <small class="text-muted fw-semibold">Doctor's Email:</small>
      <p class="mb-1">{{ record.doctorUser?.email || 'Not available' }}</p>
    </div>
    
    <div class="mb-2">
      <small class="text-muted fw-semibold">Condition Diagnosed:</small>
      <p class="mb-1">{{ record.condition }}</p>
    </div>
    
    <div class="mb-2">
      <small class="text-muted fw-semibold">Visit Date & Time:</small>
      <p class="mb-1">
        <i class="bi bi-calendar-event me-1 text-primary"></i>
        {{ record.visitDate }} at {{ record.visitTime }}
      </p>
    </div>      <div class="mb-3">
      <small class="text-muted fw-semibold">Status:</small>
      <span class="badge ms-2" 
            [ngClass]="{
              'bg-success': record.status === 'Stable', 
              'bg-warning text-dark': record.status === 'Under Observation' || record.status === 'Under Treatment',
              'bg-warning': record.status === 'Critical'
            }">
        {{ record.status }}
      </span>
    </div>
    
    <div *ngIf="record.prescription" class="mb-2">
      <small class="text-muted fw-semibold">Prescription:</small>
      <p class="mb-1 small">{{ record.prescription }}</p>
    </div>
    
    <div *ngIf="record.isEdited && record.editedByName" class="mb-2">
      <small class="text-info">
        <i class="bi bi-person-check me-1"></i> 
        Last updated by: {{ record.editedByName }}
      </small>
    </div>
  </div>
  
  <div class="d-flex justify-content-end mt-auto">
    <button class="btn btn-outline-primary btn-sm" (click)="onViewHistory()">
      <i class="bi bi-clock-history me-1"></i> View History
    </button>
  </div>
</div>
