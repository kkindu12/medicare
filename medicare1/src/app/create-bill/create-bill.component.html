<div class="container mt-4">

  <!-- Medicare Banner -->
  <div class="medicare-banner text-white px-4 py-2 mb-4">
    Medicare
  </div>

  <!-- Centered Bordered Box -->
  <div class="content-box mx-auto shadow p-4 bg-white">

    <div class="card p-4 shadow-sm">
      <h4 class="mb-4">Create Bill</h4>

      <!-- Bill Number -->
      <div class="mb-3">
        <label>Bill Number</label>
        <input type="text" class="form-control" [value]="billNumber" readonly>
      </div>

      <!-- Patient Name -->
      <div class="mb-3">
        <label>Select Patient Name</label>
        <select class="form-select" [(ngModel)]="selectedPatientName" (change)="onPatientSelect($event)">
          <option [ngValue]="null">-- Select Patient --</option>
          <option *ngFor="let patient of patients" [ngValue]="patient.name">
            {{patient.name}}
          </option>
        </select>
      </div>

      <!-- Patient ID -->
      <div class="mb-3">
        <label>Patient ID</label>
        <input type="number" class="form-control" [(ngModel)]="selectedPatientId">
      </div>

      <!-- Description & Amount -->
      <div class="row g-3 mb-3">
        <div class="col-md-8">
          <label>Description</label>
          <input type="text" class="form-control" [(ngModel)]="newItem.description">
        </div>
        <div class="col-md-4">
          <label>Amount (Rs.)</label>
          <input type="number" class="form-control" [(ngModel)]="newItem.amount">
        </div>
      </div>

      <!-- Add to Bill Button -->
      <button class="btn btn-primary mb-3 w-100" (click)="addItem()">Add to Bill</button>

      <!-- Bill Table -->
      <table class="table table-bordered" *ngIf="billItems.length > 0">
        <thead class="table-light">
          <tr>
            <th>No.</th>
            <th>Patient ID</th>
            <th>Description</th>
            <th>Amount (Rs.)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of billItems; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ item.patientId }}</td>
            <td>{{ item.description }}</td>
            <td>{{ item.amount }}</td>
            <td><button class="btn btn-sm btn-danger" (click)="removeItem(i)">Remove</button></td>
          </tr>
        </tbody>
      </table>

      <!-- Total Amount -->
      <div class="mt-3" *ngIf="billItems.length > 0">
        <h5>Total Amount: Rs. {{ totalAmount }}</h5>
      </div>

      <!-- Save & Print Button -->
      <button class="btn btn-success mt-3 w-100" (click)="submitBill()" *ngIf="billItems.length > 0">
        Save & Print Bill
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer text-center mt-5">
    &copy; 2025 Medicare System
  </footer>

</div>
